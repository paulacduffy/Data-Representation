<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous">
        <title>View cars</title>
    </head>
    <body>
        <h1>Cars</h1><br/>
        <div>
            <button id="showCreateButton" onclick = "showCreate()">Create</button>
        </div>
        <h1>All Cars</h1><br/>
        <div>
            <table class = "table" id = "carTable">
                <tr>
                    <th>reg</th>
                    <th>make</th>
                    <th>model</th>
                    <th>price</th>
                    <th>Update</th>
                    <th>Delete</th>
                </tr>
                <tr>
                    <th>191 MO 123</th>
                    <th>Ford</th>
                    <th>Mondeo</th>
                    <th>25000</th>
                    <th><button onclick="showUpdate(this)">Update</button></th>
                    <th><button onclick="doDelete(this)">Delete</button></th>
                </tr>
                <tr>
                    <th>12 D 123</th>
                    <th>Fiat</th>
                    <th>Punto</th>
                    <th>4000</th>
                    <th><button onclick="showUpdate(this)">Update</button></th>
                    <th><button onclick="doDelete(this)">Delete</button></th>
                </tr>
                <tr>
                    <th>08 G 123</th>
                    <th>Nissan</th>
                    <th>Almera</th>
                    <th>500</th>
                    <th><button onclick="showUpdate(this)">Update</button></th>
                    <th><button onclick="doDelete(this)">Delete</button></th>
                </tr>
            </table>

        </div>
        <div id = 'createUpdateForm' style = "display:none">
            <h2><span id = "createLabel">Create a</span> <span id = "updateLabel">Update this</span> Car</h2>
            Reg <input type = "text" name = "Reg"><br/>
            Make <select name = "Make">
                    <option value = "Ford">Ford</option>
                    <option value = "Fiat">Fiat</option>
                    <option value = "Nissan">Nissan</option>
            </select><br/>
            Model <input type="text" name="model"><br/>
            Price <input type="number" name="price"><br/>
            <span><button>Create</button></span>
            <span><button>Update</button></span>

        </div>
    </body>
<script>
function showCreate(){
    document.getElementById('showCreateButton').style.display="none"
    document.getElementById('carTable').style.display="none"
    document.getElementById('createUpdateForm').style.display="block"

    document.getElementById('createLabel').style.display="inline"
    document.getElementById('updateLabel').style.display="none"

    document.getElementById('doCreateButton').style.display="block"
    document.getElementById('doUpdateButton').style.display="none"

}
function showViewAll(){
    document.getElementById('showCreateButton').style.display="block"
    document.getElementById('carTable').style.display="block"
    document.getElementById('createUpdateForm').style.display="none"

}
function showUpdate(buttonElement){
    document.getElementById('showCreateButton').style.display="none"
    document.getElementById('carTable').style.display="none"
    document.getElementById('createUpdateForm').style.display="block"

    document.getElementById('createLabel').style.display="none"
    document.getElementById('updateLabel').style.display="inline"

    document.getElementById('doCreateButton').style.display="none"
    document.getElementById('doUpdateButton').style.display="block"

    var rowElement = buttonElement.parentNode.parentNode

    var car = getCarFromRow(rowElement)
    populateFormWithCar(car)

}
function doCreate(){
    var form = document.getElementById(createUpdateForm)

    var car = {}
    car.reg = form.querySelector('input[name = "reg"]').value 
    car.make = form.querySelector('select[name = "make"]').value
    car.model = form.querySelector('input[name = "model"]').value
    car.price = form.querySelector('input[name = "price"]').value
    console.log(JSON.stringify(car))

    addCarToTable(car)
    clearForm()

    showViewAll()

}
function doUpdate(){
    var car = getCarFromForm();
    var rowElement = document.getElementById(car.reg)
    setCarInRow(rowElement,car)

    clearForm()
    showViewAll()
}
function doDelete(r){
    var tableElement = document.GetElementById('carTable')
    var index = r.parentNode.parentNode.rowIndex;
    tableElement.deleteRow(index);
}

</script>

</html>